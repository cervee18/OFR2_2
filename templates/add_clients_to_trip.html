{# templates/add_clients_to_trip.html (Enhanced Content) #}
<!DOCTYPE html>
<html>
<head>
    <title>Add Clients to Trip</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"> <!- Link to your CSS -->
    <script>
        function closePopupAndRefreshParent() {
            window.opener.location.reload(); // Reload the parent window (trips page)
            window.close(); // Close the pop-up window
        }
    </script>
</head>
<body>
    <div class="popup-container"> <!- Container for popup styling -->
    <h2>Add Clients to Trip: {{ trip.name }} ({{ trip.trip_class }})</h2>

    <div class="client-search-form">
        <form method="GET" action=""> 
            <input type="text" name="search" placeholder="Search clients by name, surname, email" value="{{ search_term or '' }}"> 
            <button type="submit">Search</button>
        </form>
    </div>

    <div class="client-search-results">
        {% if clients_list %}
        <table class="client-table table-common"> <!- Use your common table style -->
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Certification</th>
                    <th>Last Dive</th>
                    <th>Actions</th> <!- "Add" action column -->
                </tr>
            </thead>
            <tbody>
                {% for client in clients_list %}
                <tr>
                    <td>{{ client.name }} {{ client.surname }}</td>
                    <td>{{ client.certification_level }}</td>
                    <td>{{ client.last_dive_day }}</td>
                    <td>
                        <a href="{{ url_for('trips_assign_client', trip_id=trip.id, client_id=client.id) }}" class="add-client-link">Add</a> 
                        <!- Link to add client route -->
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% elif search_term %}
            <p>No clients found matching your search term.</p>
        {% else %}
            <p>Search for clients to add to this trip.</p>
        {% endif %}
    </div>

    <div class="popup-actions">
        <button onclick="closePopupAndRefreshParent()">Close</button> 
    </div>
    </div> <!- Closing popup-container -->


    
</body>
</html>